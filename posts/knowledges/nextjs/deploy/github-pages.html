<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link href="https://fonts.googleapis.com/css2?family=Roboto&amp;display=swap" rel="stylesheet"/><link href="/static/css/styles.css" rel="stylesheet"/><title>hehe</title><noscript data-n-css="true"></noscript><link rel="preload" href="/_next/static/chunks/main-9d2caa3addf9c024d0da.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.964e76377795026233d5.js" as="script"/><link rel="preload" href="/_next/static/chunks/add104858cbb1ad1cb531331e55cc06c34bb29b3.0a836e232ed405b93873.js" as="script"/><link rel="preload" href="/_next/static/chunks/58c105bfef553d8834b132c1046481403965bee7.3f748c1c2a9dfed953f7.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-d5cd27abdb01a01c92b3.js" as="script"/><link rel="preload" href="/_next/static/chunks/724c21198ece942e39a6fd82e831a1f8cfc716cd.f75784527712e633392a.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/posts/%5B...path%5D-56f60c45aa776aa39253.js" as="script"/></head><body><div id="__next"><div class="mainLayout_container"><div><header><div class="container"><nav class="navbar"><a class="navbar__brand" href="/">Maison&#x27;s playground</a></nav></div></header><nav><a href="/">Home</a><a href="/knowledges">Knowledges</a><a href="/">Home</a><a href="/about">About</a></nav></div><div class="container"><article><h1>ttle</h1><div><h1>Deploy</h1>
<h2>Github pages</h2>
<p>github pages로 배포를 할 수 있다.
도메인 명을 원한다면 repo명을 {USERNAME}.github.io 로 생성한다.</p>
<p>github의 settings에서 github pages를 설정하고 배포할 수 있는데,
branch를 master로 설정하게 되면 보통 README.md 파일이 보이는 형태로 배포가 될 것이다.</p>
<p>nextjs 배포의 기본 전략은, gh-pages라는 다른 branch를 두고, 이 branch에 build된 실행 소스만 커밋하는 전략이다.
그리고 github pages의 branch를 gh-pages로 설정하면 실행 소스에 대해 따로 배포가 된다.</p>
<p>next build 로 빌드를 하고
next export 로 ./out/ 디렉토리에 실행 소스를 생성한 후
touch out/.nojekyll 으로 _next 디렉토리 등 underbar가 prefix로 붙은 디렉토리가 github pages에서 처리하지 않도록 설정해둔다.</p>
<p>그리고 ./out/ 디렉토리를 gh-pages branch에 push하면 된다.
방법 중에 하나는 <code>npm i --save-dev gh-pages</code> 모듈을 이용해서
<code>gh-pages -d out</code>
으로 push하는 방법이 있다.</p>
<h3>Github actions</h3>
<p>master 머지 시 자동으로 배포가 되길 원할 것이다.
이를 gh actions로 간편하게 할 수 있다.</p>
<p>위의 배포과정을 동일하게 수행하면 되는데, gh-pages 모듈을 쓰는 대신에</p>
<pre><code>- name: push .out/ to gh-pages
- run: |
  git config user.name github-actions
  git config user.email github-actions@github.com
  git --work-tree out add --all
  git commit -m "Automatic Deploy action run by github-actions"
  git push origin HEAD:gh-pages --force
</code></pre>
<p>으로 push를 하면, remote server의 git config 설정을 따로 할 필요가 없어서 간편하다.</p>
</div></article></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"content":"\u003ch1\u003eDeploy\u003c/h1\u003e\n\u003ch2\u003eGithub pages\u003c/h2\u003e\n\u003cp\u003egithub pages로 배포를 할 수 있다.\n도메인 명을 원한다면 repo명을 {USERNAME}.github.io 로 생성한다.\u003c/p\u003e\n\u003cp\u003egithub의 settings에서 github pages를 설정하고 배포할 수 있는데,\nbranch를 master로 설정하게 되면 보통 README.md 파일이 보이는 형태로 배포가 될 것이다.\u003c/p\u003e\n\u003cp\u003enextjs 배포의 기본 전략은, gh-pages라는 다른 branch를 두고, 이 branch에 build된 실행 소스만 커밋하는 전략이다.\n그리고 github pages의 branch를 gh-pages로 설정하면 실행 소스에 대해 따로 배포가 된다.\u003c/p\u003e\n\u003cp\u003enext build 로 빌드를 하고\nnext export 로 ./out/ 디렉토리에 실행 소스를 생성한 후\ntouch out/.nojekyll 으로 _next 디렉토리 등 underbar가 prefix로 붙은 디렉토리가 github pages에서 처리하지 않도록 설정해둔다.\u003c/p\u003e\n\u003cp\u003e그리고 ./out/ 디렉토리를 gh-pages branch에 push하면 된다.\n방법 중에 하나는 \u003ccode\u003enpm i --save-dev gh-pages\u003c/code\u003e 모듈을 이용해서\n\u003ccode\u003egh-pages -d out\u003c/code\u003e\n으로 push하는 방법이 있다.\u003c/p\u003e\n\u003ch3\u003eGithub actions\u003c/h3\u003e\n\u003cp\u003emaster 머지 시 자동으로 배포가 되길 원할 것이다.\n이를 gh actions로 간편하게 할 수 있다.\u003c/p\u003e\n\u003cp\u003e위의 배포과정을 동일하게 수행하면 되는데, gh-pages 모듈을 쓰는 대신에\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e- name: push .out/ to gh-pages\n- run: |\n  git config user.name github-actions\n  git config user.email github-actions@github.com\n  git --work-tree out add --all\n  git commit -m \"Automatic Deploy action run by github-actions\"\n  git push origin HEAD:gh-pages --force\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e으로 push를 하면, remote server의 git config 설정을 따로 할 필요가 없어서 간편하다.\u003c/p\u003e\n"},"__N_SSG":true},"page":"/posts/[...path]","query":{"path":["knowledges","nextjs","deploy","github-pages"]},"buildId":"CUj-ZWWFitjXQ_8x_f2c5","nextExport":false,"isFallback":false,"gsp":true,"head":[["meta",{"name":"viewport","content":"width=device-width"}],["meta",{"charSet":"utf-8"}],["link",{"href":"https://fonts.googleapis.com/css2?family=Roboto\u0026display=swap","rel":"stylesheet"}],["link",{"href":"/static/css/styles.css","rel":"stylesheet"}],["title",{"children":"hehe"}]]}</script><script nomodule="" src="/_next/static/chunks/polyfills-e3f5e01e6e72982ceda3.js"></script><script src="/_next/static/chunks/main-9d2caa3addf9c024d0da.js" async=""></script><script src="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" async=""></script><script src="/_next/static/chunks/framework.964e76377795026233d5.js" async=""></script><script src="/_next/static/chunks/add104858cbb1ad1cb531331e55cc06c34bb29b3.0a836e232ed405b93873.js" async=""></script><script src="/_next/static/chunks/58c105bfef553d8834b132c1046481403965bee7.3f748c1c2a9dfed953f7.js" async=""></script><script src="/_next/static/chunks/pages/_app-d5cd27abdb01a01c92b3.js" async=""></script><script src="/_next/static/chunks/724c21198ece942e39a6fd82e831a1f8cfc716cd.f75784527712e633392a.js" async=""></script><script src="/_next/static/chunks/pages/posts/%5B...path%5D-56f60c45aa776aa39253.js" async=""></script><script src="/_next/static/CUj-ZWWFitjXQ_8x_f2c5/_buildManifest.js" async=""></script><script src="/_next/static/CUj-ZWWFitjXQ_8x_f2c5/_ssgManifest.js" async=""></script></body></html>